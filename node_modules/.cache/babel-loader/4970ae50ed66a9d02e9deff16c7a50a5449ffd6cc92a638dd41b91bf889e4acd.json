{"ast":null,"code":"import axios from 'axios';\n\n// Your YouTube API key\nconst YOUTUBE_API_KEY = 'AIzaSyApXWAoAYayJouq0iKRlMj-3R61VRLqkCE';\nconst API_URL = 'http://localhost:5000/api';\nexport const extractVideoId = url => {\n  try {\n    // Handle different YouTube URL formats\n    const patterns = [/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/|youtube\\.com\\/v\\/|youtube\\.com\\/watch\\?.*&v=)([^#&?]*).*/, /youtube\\.com\\/shorts\\/([^#&?]*).*/, /youtube\\.com\\/watch\\?.*v=([^#&?]*).*/];\n    for (const pattern of patterns) {\n      const match = url.match(pattern);\n      if (match && match[1] && match[1].length === 11) {\n        return match[1];\n      }\n    }\n\n    // If no pattern matches, try to extract from the URL directly\n    const urlObj = new URL(url);\n    const searchParams = new URLSearchParams(urlObj.search);\n    const videoId = searchParams.get('v');\n    if (videoId && videoId.length === 11) {\n      return videoId;\n    }\n    return null;\n  } catch (error) {\n    console.error('Error extracting video ID:', error);\n    return null;\n  }\n};\nexport const getVideoTranscript = async url => {\n  try {\n    if (!url) {\n      throw new Error('YouTube URL is required');\n    }\n    const videoId = extractVideoId(url);\n    if (!videoId) {\n      throw new Error('Invalid YouTube URL');\n    }\n    const response = await axios.post(`${API_URL}/transcript`, {\n      url\n    });\n    if (!response.data.transcript || response.data.transcript.trim() === '') {\n      throw new Error('No transcript available for this video');\n    }\n    return response.data.transcript;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    console.error('Error fetching transcript:', error);\n    if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.error) {\n      throw new Error(error.response.data.error);\n    }\n    if (error.code === 'ERR_NETWORK') {\n      throw new Error('Unable to connect to the server. Please check if the server is running.');\n    }\n    throw new Error('Failed to fetch transcript. Please try again.');\n  }\n};\nexport const analyzeTranscript = async transcript => {\n  try {\n    if (!transcript) {\n      throw new Error('Transcript is required for analysis');\n    }\n    if (typeof transcript !== 'string') {\n      throw new Error('Transcript must be a string');\n    }\n    const response = await axios.post(`${API_URL}/analyze`, {\n      transcript\n    });\n    return response.data.analysis;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    console.error('Error analyzing transcript:', error);\n    if ((_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2$data = _error$response2.data) !== null && _error$response2$data !== void 0 && _error$response2$data.error) {\n      throw new Error(error.response.data.error);\n    }\n    if (error.code === 'ERR_NETWORK') {\n      throw new Error('Unable to connect to the server. Please check if the server is running.');\n    }\n    throw new Error('Failed to analyze transcript. Please try again.');\n  }\n};","map":{"version":3,"names":["axios","YOUTUBE_API_KEY","API_URL","extractVideoId","url","patterns","pattern","match","length","urlObj","URL","searchParams","URLSearchParams","search","videoId","get","error","console","getVideoTranscript","Error","response","post","data","transcript","trim","_error$response","_error$response$data","code","analyzeTranscript","analysis","_error$response2","_error$response2$data"],"sources":["D:/rvce/src/services/youtubeService.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Your YouTube API key\r\nconst YOUTUBE_API_KEY = 'AIzaSyApXWAoAYayJouq0iKRlMj-3R61VRLqkCE';\r\n\r\ninterface TranscriptResponse {\r\n  transcript: string;\r\n}\r\n\r\ninterface AnalysisResponse {\r\n  analysis: string;\r\n}\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\nexport const extractVideoId = (url: string): string | null => {\r\n  try {\r\n    // Handle different YouTube URL formats\r\n    const patterns = [\r\n      /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/|youtube\\.com\\/v\\/|youtube\\.com\\/watch\\?.*&v=)([^#&?]*).*/,\r\n      /youtube\\.com\\/shorts\\/([^#&?]*).*/,\r\n      /youtube\\.com\\/watch\\?.*v=([^#&?]*).*/\r\n    ];\r\n\r\n    for (const pattern of patterns) {\r\n      const match = url.match(pattern);\r\n      if (match && match[1] && match[1].length === 11) {\r\n        return match[1];\r\n      }\r\n    }\r\n\r\n    // If no pattern matches, try to extract from the URL directly\r\n    const urlObj = new URL(url);\r\n    const searchParams = new URLSearchParams(urlObj.search);\r\n    const videoId = searchParams.get('v');\r\n    \r\n    if (videoId && videoId.length === 11) {\r\n      return videoId;\r\n    }\r\n\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Error extracting video ID:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const getVideoTranscript = async (url: string): Promise<string> => {\r\n  try {\r\n    if (!url) {\r\n      throw new Error('YouTube URL is required');\r\n    }\r\n\r\n    const videoId = extractVideoId(url);\r\n    if (!videoId) {\r\n      throw new Error('Invalid YouTube URL');\r\n    }\r\n\r\n    const response = await axios.post<TranscriptResponse>(`${API_URL}/transcript`, { url });\r\n    \r\n    if (!response.data.transcript || response.data.transcript.trim() === '') {\r\n      throw new Error('No transcript available for this video');\r\n    }\r\n\r\n    return response.data.transcript;\r\n  } catch (error: any) {\r\n    console.error('Error fetching transcript:', error);\r\n    if (error.response?.data?.error) {\r\n      throw new Error(error.response.data.error);\r\n    }\r\n    if (error.code === 'ERR_NETWORK') {\r\n      throw new Error('Unable to connect to the server. Please check if the server is running.');\r\n    }\r\n    throw new Error('Failed to fetch transcript. Please try again.');\r\n  }\r\n};\r\n\r\nexport const analyzeTranscript = async (transcript: string): Promise<string> => {\r\n  try {\r\n    if (!transcript) {\r\n      throw new Error('Transcript is required for analysis');\r\n    }\r\n\r\n    if (typeof transcript !== 'string') {\r\n      throw new Error('Transcript must be a string');\r\n    }\r\n\r\n    const response = await axios.post<AnalysisResponse>(`${API_URL}/analyze`, { transcript });\r\n    return response.data.analysis;\r\n  } catch (error: any) {\r\n    console.error('Error analyzing transcript:', error);\r\n    if (error.response?.data?.error) {\r\n      throw new Error(error.response.data.error);\r\n    }\r\n    if (error.code === 'ERR_NETWORK') {\r\n      throw new Error('Unable to connect to the server. Please check if the server is running.');\r\n    }\r\n    throw new Error('Failed to analyze transcript. Please try again.');\r\n  }\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}